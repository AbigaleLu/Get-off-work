<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>下班倒计时</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* 自定义 CSS 来创建梦幻的渐变背景 */
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #fce4ec, #e8f5e9, #e1f5fe, #fff9c4);
            background-size: 400% 400%;
            animation: gradientAnimation 15s ease infinite;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        @keyframes gradientAnimation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* 烟花动画的自定义样式 */
        .firework-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }

        .firework {
            position: absolute;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: white;
            animation: sparkle 0.8s ease-out forwards;
        }

        @keyframes sparkle {
            0% {
                transform: scale(0);
                opacity: 1;
            }
            100% {
                transform: scale(1.5);
                opacity: 0;
            }
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">
    <div id="component-container" class="relative w-11/12 max-w-sm p-8 bg-white/60 backdrop-blur-md rounded-[32px] shadow-2xl text-center transition-all duration-500 transform hover:scale-105">
        <!-- 倒计时/问候语显示区域 -->
        <div id="content-display" class="relative z-10">
            <h1 class="text-4xl sm:text-5xl md:text-6xl font-extrabold text-gray-800 tracking-tight leading-tight mb-2">
                <span id="countdown-hours">--</span>:<span id="countdown-minutes">--</span>:<span id="countdown-seconds">--</span>
            </h1>
            <p id="countdown-message" class="text-lg sm:text-xl font-medium text-gray-600">距离下班还有</p>
        </div>
        <!-- 烟花容器 -->
        <div id="firework-container" class="firework-container hidden"></div>
    </div>

    <script>
        // 定义全局变量以供访问
        const countdownHours = document.getElementById('countdown-hours');
        const countdownMinutes = document.getElementById('countdown-minutes');
        const countdownSeconds = document.getElementById('countdown-seconds');
        const countdownMessage = document.getElementById('countdown-message');
        const fireworkContainer = document.getElementById('firework-container');
        const componentContainer = document.getElementById('component-container');

        let animationTriggered = false;

        // 生成随机数
        function getRandom(min, max) {
            return Math.random() * (max - min) + min;
        }

        // 启动烟花动画
        function launchFireworks() {
            if (animationTriggered) return;
            animationTriggered = true;

            fireworkContainer.classList.remove('hidden');

            // 烟花粒子生成逻辑
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.classList.add('firework');
                
                const size = getRandom(4, 12);
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                
                const startX = getRandom(40, 60);
                const startY = getRandom(40, 60);
                particle.style.left = `${startX}%`;
                particle.style.top = `${startY}%`;

                const endX = getRandom(0, 100);
                const endY = getRandom(0, 100);
                
                const delay = getRandom(0, 500);
                const duration = getRandom(1, 2);

                const color = `hsl(${getRandom(0, 360)}, 100%, 75%)`;
                particle.style.backgroundColor = color;
                
                const transform = `translate(${endX - startX}vw, ${endY - startY}vh)`;
                particle.style.transition = `transform ${duration}s ease-out ${delay}ms, opacity ${duration}s ease-out ${delay}ms`;
                particle.style.transform = transform;
                particle.style.opacity = '0';

                fireworkContainer.appendChild(particle);

                // 移除粒子
                setTimeout(() => {
                    fireworkContainer.removeChild(particle);
                    if (fireworkContainer.children.length === 0) {
                        fireworkContainer.classList.add('hidden');
                        animationTriggered = false; // 重置，允许下次触发
                    }
                }, duration * 1000 + delay + 100);
            }
        }

        // 更新倒计时
        function updateCountdown() {
            const now = new Date();
            const dayOfWeek = now.getDay();
            const hours = now.getHours();

            // 检查是否是工作日 (周一到周五) 且在17点之前
            if (dayOfWeek >= 1 && dayOfWeek <= 5 && hours < 17) {
                const targetTime = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 17, 0, 0);
                const timeLeft = targetTime.getTime() - now.getTime();

                if (timeLeft <= 0) {
                    // 到达下班时间
                    countdownMessage.textContent = '祝你下班快乐!';
                    countdownHours.textContent = '00';
                    countdownMinutes.textContent = '00';
                    countdownSeconds.textContent = '00';
                    componentContainer.classList.add('bg-pink-100'); // 改变背景色以示庆祝
                    launchFireworks();
                } else {
                    // 还在工作时间，正常倒计时
                    const totalSeconds = Math.floor(timeLeft / 1000);
                    const h = String(Math.floor(totalSeconds / 3600)).padStart(2, '0');
                    const m = String(Math.floor((totalSeconds % 3600) / 60)).padStart(2, '0');
                    const s = String(totalSeconds % 60).padStart(2, '0');

                    countdownHours.textContent = h;
                    countdownMinutes.textContent = m;
                    countdownSeconds.textContent = s;
                    countdownMessage.textContent = '距离下班还有';
                }
            } else {
                // 非工作时间，显示问候语
                countdownMessage.textContent = '要好好生活🥰';
                countdownHours.textContent = '';
                countdownMinutes.textContent = '';
                countdownSeconds.textContent = '';
                componentContainer.classList.remove('bg-pink-100');
            }
        }

        // 每秒更新一次倒计时
        document.addEventListener('DOMContentLoaded', () => {
            updateCountdown();
            setInterval(updateCountdown, 1000);
        });
    </script>
</body>
</html>
